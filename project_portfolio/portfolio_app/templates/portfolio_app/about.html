{% extends 'base.html' %}
{% load static %}

{% block content %}

<!-- Toast messages (error or success) -->
<div class="toast-container position-fixed top-0 end-0 p-3">
    {% for message in messages %}
        <div class="toast align-items-center {% if message.tags == 'error' %}bg-danger {% else %} bg-success {% endif %} border-0" role="alert" aria-live="assertive" aria-atomic="true" style="margin-top: 100px;">
            <div class="d-flex">
                <div class="toast-body" style="color: white;">
                    {{ message }}
                </div>
                <button style="color: white; background-color: transparent;" type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    {% endfor %}
</div>

<!-- About page section -->
<div class="about-page slide delay01">
    {% if top_paragraph or paragraph_1 or paragraph_2 or paragraph_3 %}
        <div class="about">
            <!-- Display top paragraph -->
            {% if top_paragraph %}
                <h2>{{ top_paragraph }}</h2>
            {% endif %}
            <!-- Display additional paragraphs -->
            {% if paragraph_1 %}
                <p class="text">{{ paragraph_1 }}</p>
            {% endif %}
            {% if paragraph_2 %}
                <p class="text">{{ paragraph_2 }}</p>
            {% endif %}
            {% if paragraph_3 %}
                <p class="text">{{ paragraph_3 }}</p>
            {% endif %}
        </div>

        <!-- Display profile image if available -->
        {% if image_url %}
        <img
        src="{{ image_url }}"
        alt="Profile Image"
        class="photo-dejan"
        loading="lazy">
        {% endif %}

        <!-- Edit profile description button (only for authenticated users) -->
        {% if user.is_authenticated %}
            <div style="text-align: center;" class="description">
                <p>
                    <a href="{% url 'add_edit_profile_description' %}" style="padding-top: 0px; display: inline-block;">Edit</a>
                </p>
            </div>
        {% endif %}
    {% else %}
        <p>No data available for the about page.</p>
    {% endif %}

    <!-- Work experiences section -->
    <div class="about">
        <h4>Work Experiences</h4>
        
        {% if work_experiences %}
        <div class="multi-row-grid">
            {% for experience in work_experiences %}
            <div class="multi-row">
                <p class="title">{{ experience.job_title }}</p>
                <p class="entity">@{{ experience.company }}</p>
                <p class="years">{{ experience.start_year }} - {{ experience.end_year }}</p>
                <!-- Edit and delete buttons for each work experience (only for authenticated users) -->
                {% if user.is_authenticated %}
                <span style="display: inline;">
                    <a href="{% url 'edit_work_experience' experience.id %}" class="edit-button" style="margin-right: 10px;">Edit</a>
                    <a href="{% url 'delete_work_experience' experience.id %}" class="delete-button" onclick="return confirm('Are you sure you want to delete this work experience?');">Delete</a>
                </span>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        {% if user.is_authenticated %}
        <!-- Link to add new work experience (only for authenticated users) -->
        <p>Please <a href="{% url 'add_work_experience' %}" style="padding-top: 0px; display: inline-block;">add</a> work experience.</p>
        {% endif %}
        
        {% else %}
        <!-- Message to add work experience (only for authenticated users) -->
        {% if user.is_authenticated %}
        <p>Please <a href="{% url 'add_work_experience' %}" style="padding-top: 0px; display: inline-block;">add</a> work experience.</p>
        {% endif %}
        {% endif %}
        
        <!-- Education section -->
        <h4>Education</h4>
        {% if education_entries %}
        <div class="multi-row-grid">
            {% for education in education_entries %}
            <div class="multi-row">
                <p class="title">{{ education.title }}</p>
                <p class="entity">{{ education.degree_institution }}</p>
                <p class="years">{{ education.start_year }} - {{ education.end_year }}</p>
                <!-- Edit and delete buttons for each education entry (only for authenticated users) -->
                {% if user.is_authenticated %}
                <span style="display: inline;">
                    <a href="{% url 'edit_education' education.id %}" class="edit-button" style="margin-right: 10px;">Edit</a>
                    <a href="{% url 'delete_education' education.id %}" class="delete-button" onclick="return confirm('Are you sure you want to delete this education?');">Delete</a>
                </span>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        {% if user.is_authenticated %}
        <!-- Link to add new education entry (only for authenticated users) -->
        <p>Please <a href="{% url 'add_education' %}" style="padding-top: 0px; display: inline-block;">add</a> education.</p>
        {% endif %}
        
        {% else %}
        <!-- Message to add education (only for authenticated users) -->
        {% if user.is_authenticated %}
        <p>Please <a href="{% url 'add_education' %}" style="padding-top: 0px; display: inline-block;">add</a> education.</p>
        {% endif %}
        {% endif %}

        <!-- Disciplines section -->
        <h4>Disciplines</h4>
        {% if discipline_entries %}
        <div class="multi-row-grid">
            {% for discipline in discipline_entries %}
            <div class="multi-row">
                <p>{{ discipline.name }}</p>
                <!-- Edit and delete buttons for each discipline (only for authenticated users) -->
                {% if user.is_authenticated %}
                <span style="display: inline;">
                    <a href="{% url 'edit_discipline' discipline.id %}" class="edit-button" style="margin-right: 10px;">Edit</a>
                    <a href="{% url 'delete_discipline' discipline.id %}" class="delete-button" onclick="return confirm('Are you sure you want to delete this discipline?');">Delete</a>
                </span>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        <!-- Link to add new discipline (only for authenticated users) -->
        {% if user.is_authenticated %}
        <p>Please <a href="{% url 'add_discipline' %}" style="padding-top: 0px; display: inline-block;">add</a> a discipline.</p>
        {% endif %}
        
        {% else %}
        <!-- Message to add discipline (only for authenticated users) -->
        {% if user.is_authenticated %}
        <p>Please <a href="{% url 'add_discipline' %}" style="padding-top: 0px; display: inline-block;">add</a> a discipline.</p>
        {% endif %}
        {% endif %}
        
        <!-- Contact section -->
        <h4>Contact</h4>
        <p>Feel free to reach out for projects, collaborations, or just to say hello! Currently seeking new opportunities.</p>
        <div class="multi-row contact-options">
            <!-- Display user email -->
            <a id="copyemail" data-clipboard-text="{{ user_email }}">{{ user_email }}</a>
            <!-- Display LinkedIn URL if available -->
            {% if linkedin_url %}
            <a href="{{ linkedin_url }}" target="_blank">LinkedIn</a>
            {% endif %}
        </div>
    </div>
</div>

<!-- Include Bootstrap and jQuery -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Show toast notifications when page loads
    document.addEventListener('DOMContentLoaded', function () {
        var toastElList = [].slice.call(document.querySelectorAll('.toast'));
        var toastList = toastElList.map(function (toastEl) {
            return new bootstrap.Toast(toastEl);
        });
        toastList.forEach(function (toast) {
            toast.show();
        });
    });
</script>

<!-- Include Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
{% endblock %}
