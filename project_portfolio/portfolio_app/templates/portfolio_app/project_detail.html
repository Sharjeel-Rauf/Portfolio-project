{% extends 'base.html' %}
{% block content %}
<div id = "project_details">
<h1>{{ project.title }}</h1>

{% if no_details %}
    <div class="about-me slide delay03">
        <div class="description">
            <p>No details yet. Please <a href="{% url 'add_project_detail' project.id %}" style = "padding-top: 0px; display: inline-block;">add</a> the details for the project.</p>
        </div>
    </div>
{% else %}


<!-- ############################################## -->

<div class="work-page slide delay01">
	<div class="work-page-content">
        {% for detail in project_details %}
		<h1>{{ detail.code_title }}</h1>
		<h3 class=" text">
			{{ detail.description }}
		</h3>
        {% if detail.python_file %}
		<p>
			<strong>File:</strong> <a href="{{ detail.python_file.url }}">Download</a>
		</p>
        <p>
			<pre><code id="code-3" class="language-python">{{ detail.python_file_content|linebreaksbr }}</code></pre>
            <button class="btn btn-secondary copy-btn" data-target="code-3">Copy Code</button>
		</p>
        {% endif %}
        <button class = "btn btn-primary" hx-get="{% url 'edit_details' detail.id %}"
        hx-target="#project_details">Edit Details</button>

        {% endfor %}
    </div>
    <div class="back-to-projects">
		<a href="{% url 'portfolio_page' %}">Back to all project </a>
	</div>
    
</div>
    
<!-- ############################################## -->








{% endif %}



<!-- Add Prism.js for syntax highlighting -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/prism.min.js"></script>
<link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize Prism for syntax highlighting
    Prism.highlightAll();

    // Add click event listener for the copy buttons
    document.querySelectorAll('.copy-btn').forEach(function(button) {
        button.addEventListener('click', function() {
            // Get the target ID from the data-target attribute
            var targetId = button.getAttribute('data-target');
            console.log("Target ID:", targetId); // Debugging: Log the target ID

            // Ensure the target ID is correct
            targetId = targetId.replace('code-', '');

            // Get the code element based on the target ID
            console.log("Searching for element with ID:", `#code-${targetId}`);
            var codeElement = document.querySelector(`#code-${targetId}`);
            console.log("Code Element:", codeElement); // Debugging: Log the code element

            // Check if the code element exists
            if (!codeElement) {
                console.log("Code element not found for target ID:", targetId);
                return;
            }

            // Verify the content of the code element
            console.log("Code Content:", codeElement.textContent);

            // Create a temporary textarea element
            var tempTextarea = document.createElement('textarea');
            tempTextarea.value = codeElement.textContent;
            document.body.appendChild(tempTextarea);

            // Select and copy the content
            tempTextarea.select();
            document.execCommand('copy');

            // Remove the temporary textarea element
            document.body.removeChild(tempTextarea);

            // Provide feedback to the user
            alert('Code copied to clipboard!');
        });
    });
});


</script>

</div>
{% endblock %}


